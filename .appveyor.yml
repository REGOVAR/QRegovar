image: Visual Studio 2017

branches:
  only:
    - master
    
install:
  - set QTDIR=C:\Qt\5.10.1\msvc2017_64
  - set PATH=%QTDIR%\bin;C:\Qt\Tools\mingw530_32\bin;%PATH%;
  
build_script:
  - qmake app/QRegovar.pro -spec win32-msvc
  - C:\Qt\Tools\QtCreator\bin\jom.exe qmake_all
  - C:\Qt\Tools\QtCreator\bin\jom.exe -f Makefile.Release

deploy:
  - provider: GitHub
    artifact: C:/projects/qregovar
    draft: true
    prerelease: false
    on:
      branch: master                # release from master branch only
      appveyor_repo_tag: true       # deploy on tag push only


